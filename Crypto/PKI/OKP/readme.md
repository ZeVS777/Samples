# Загрузка EdDSA ключей в .NET и использование ECDH алгоритмов с испоользованием кривых Эдвардса

Существуют несколько методов загрузка EdDSA ключей и создание соответствующих криптографических объектов в .NET. 
Здесь можно найти примеры использования следующих кривых при использовании алгоритма EdDSA: Ed25519, Ed448, 
которые позволяют создавать и подтверждать подпись сообщения. Для механизма генерации общего ключа на основе публичных данных
показаны реализации алгоритмов ECDH: ECDH-ES с шифрованием при помощи алгоритмов A128GCM, A192GCM, A256GCM, 
а так же ECDH-ES+A128KW, ECDH-ES+A192KW, ECDH-ES+A256KW с соответсвующими алгоритмами шифрования A128CBC-HS256, A192CBC-HS384, 
A256CBC-HS512. Опспиание алгоритмов, основанных на кривых Эдвардса можно найти в [RFC8037](https://datatracker.ietf.org/doc/html/rfc8037).


## Загрузка ECDsa из файлов приватного и публичного PEM ключа

Создание приватного ключа:

```bash
openssl genpkey -algorithm ED25519 -out private-key.pem
```

*algorithm - тип эллиптической кривой Эдвардса (ED25519, ED448)*

Создание публичного ключа:

```bash
openssl pkey -in private-key.pem -pubout -out public-key.pem
```

## Загрузка EdDsa из X.509 pem файлов

Создание самоподписанного сертификата:

```bash
openssl req -new -x509 -key private-key.pem -out cert.pem -days 360
```

## Загрузка ECDsa из JWK

Показан пример, как можно сгенерировать JWK и как из него получить EdDSA.

## Загрузка из эфемерного сертификата (Ed25519, Ed448)

Создание самоподписанного сертификата на лету и формирование приватного и публичного ключей. 
Так алгоритм не поддерживается поо умолчанию .NET, используется библиотоека Bouncy Castle.

## Использование CryptoProviderFactory для создания подписи и её проверки (Ed25519, Ed448)

**Microsoft.IdentityModel.Tokens** предлагает удобный инструмент для проведения процедуры подтверждения валидности подписи.
Однако он поддерживает ограниченный [набор алгоритмов](https://github.com/AzureAD/azure-activedirectory-identitymodel-extensions-for-dotnet/wiki/Supported-Algorithms), 
среди которых нет OKP алгоритмов. Для поддержки алгоритмов, 
не поддерживаемых стандартными инструментами, можно расширить механизм: 
см. CustomCryptoProvider.cs.

## Применение ECDH-ES механизмов для шифрооованной передачи данных

Описание алгоритмов ECDH-ES можно найти в [RFC8037](https://datatracker.ietf.org/doc/html/rfc8037#section-3.2)
